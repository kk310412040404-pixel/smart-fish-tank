/* --- 1. BASE LAYOUT (Bắt buộc phải có) --- */
body {
  font-family: 'Segoe UI', sans-serif;
  display: flex;
  height: 100vh;
  margin: 0;
  background: var(--bg-main);
  color: var(--text-color);
  transition: 0.3s;
}

/* --- 2. VARIABLES (Màu sắc) --- */
body.theme-default { --bg-sidebar: #1e293b; --bg-main: #0f172a; --bg-card: #1e293b; --text-color: #fff; --primary: #a855f7; --border: #334155; }
body.theme-ocean { --bg-sidebar: #0f172a; --bg-main: #1e3a8a; --bg-card: #1e293b; --text-color: #e0f2fe; --primary: #3b82f6; --border: #1d4ed8; }
body.theme-forest { --bg-sidebar: #052e16; --bg-main: #022c22; --bg-card: #14532d; --text-color: #dcfce7; --primary: #22c55e; --border: #166534; }
body.theme-light { --bg-sidebar: #f1f5f9; --bg-main: #ffffff; --bg-card: #f8fafc; --text-color: #0f172a; --primary: #7c3aed; --border: #cbd5e1; }

/* --- 3. SIDEBAR & MAIN --- */
.sidebar { width: 260px; background: var(--bg-sidebar); padding: 20px; border-right: 1px solid var(--border); display: flex; flex-direction: column; }
.sidebar h2 { color: var(--primary); text-align: center; }
.sidebar ul { list-style: none; padding: 0; }
.sidebar li { padding: 12px; margin: 5px 0; cursor: pointer; color: var(--text-color); opacity: 0.7; border-radius: 6px; transition: 0.2s; }
.sidebar li:hover, .sidebar li.active { background: var(--primary); color: #fff; opacity: 1; }
.logout-btn { margin-top: auto; padding: 12px; cursor: pointer; color: #ef4444; font-weight: bold; text-align: center; border-top: 1px solid var(--border); }

.main { flex: 1; padding: 30px; overflow-y: auto; }
.page { display: none; }
.page.active { display: block; animation: fadeIn 0.3s; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

/* --- 4. COMPONENTS (Card, Grid, Table) --- */
.card { background: var(--bg-card); padding: 20px; border-radius: 12px; border: 1px solid var(--border); margin-bottom: 20px; }
.grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }

/* User Card */
.user-card { background: var(--bg-card); padding: 20px; border-radius: 12px; border: 1px solid var(--border); display: flex; align-items: center; gap: 15px; cursor: pointer; transition: 0.3s; }
.user-card:hover { transform: translateY(-5px); border-color: var(--primary); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
.u-avatar { width: 50px; height: 50px; background: var(--primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 20px; }
.u-info h4 { margin: 0; color: var(--text-color); }
.u-info p { margin: 5px 0 0; font-size: 12px; opacity: 0.7; }

/* Table */
table { width: 100%; border-collapse: collapse; color: var(--text-color); }
th { text-align: left; padding: 12px; border-bottom: 2px solid var(--border); color: var(--primary); }
td { padding: 12px; border-bottom: 1px solid var(--border); }

/* Settings Layout */
.settings-container { display: grid; grid-template-columns: 1fr 2fr; gap: 24px; }
.form-group { margin-bottom: 15px; }
.form-group label { display: block; font-size: 13px; margin-bottom: 5px; opacity: 0.8; }
.form-group input { width: 100%; padding: 10px; background: rgba(0,0,0,0.2); border: 1px solid var(--border); color: var(--text-color); border-radius: 6px; box-sizing: border-box; }

/* Theme Boxes */
.theme-options { display: flex; gap: 15px; margin-top: 10px; }
.theme-box { width: 40px; height: 40px; border-radius: 8px; cursor: pointer; border: 2px solid transparent; }
.theme-box.selected { border-color: #fff; transform: scale(1.1); box-shadow: 0 0 10px var(--primary); }
.t-default { background: linear-gradient(135deg, #1e293b, #a855f7); }
.t-ocean { background: linear-gradient(135deg, #1e3a8a, #3b82f6); }
.t-forest { background: linear-gradient(135deg, #022c22, #22c55e); }
.t-light { background: linear-gradient(135deg, #ffffff, #7c3aed); }

/* Modal */
.modal { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.8); display:none; justify-content:center; align-items:center; z-index: 999; }
.modal-content { background: var(--bg-card); padding: 30px; border-radius: 12px; width: 400px; border: 1px solid var(--border); }
.widget-list label { display: block; margin: 10px 0; cursor: pointer; }
.modal-buttons { margin-top: 20px; display: flex; justify-content: flex-end; gap: 10px; }
button { padding: 8px 16px; border-radius: 6px; border: none; cursor: pointer; font-weight: bold; }
.btn-save { background: var(--primary); color: white; }
.btn-cancel { background: #64748b; color: white; }

/* --- STYLE CHO MODAL NHẬP SĐT (FIX LỖI MÀU & NỀN TRẮNG) --- */

/* 1. Header của Modal */
.modal-header-icon {
    text-align: center;
    margin-bottom: 20px;
}
.modal-header-icon i {
    font-size: 40px;
    color: var(--primary);
    background: rgba(168, 85, 247, 0.1);
    width: 80px;
    height: 80px;
    line-height: 80px;
    border-radius: 50%;
    box-shadow: 0 0 20px rgba(168, 85, 247, 0.2);
}

/* 2. Khung bao quanh (Input Group) */
.phone-input-group {
    display: flex;
    align-items: center;
    background-color: #0f172a !important; /* Nền tối trùng màu web */
    border: 1px solid #475569;
    border-radius: 8px;
    margin: 20px 0;
    padding: 0;
    transition: 0.3s;
    position: relative;
    overflow: hidden;
}

/* Khi bấm vào thì viền sáng lên */
.phone-input-group:focus-within {
    border-color: var(--primary);
    box-shadow: 0 0 0 2px rgba(168, 85, 247, 0.3);
}

/* Phần hiển thị đầu số (+84) */
.phone-prefix {
    padding: 14px 16px;
    background: rgba(255, 255, 255, 0.05); /* Nền mờ nhẹ */
    border-right: 1px solid #475569;
    color: #e2e8f0; /* Màu chữ sáng */
    font-weight: bold;
    display: flex;
    align-items: center;
    gap: 8px;
    white-space: nowrap;
}

/* 3. Ô nhập liệu chính (FIX QUAN TRỌNG) */
.phone-input-group input {
    flex: 1; /* Chiếm hết khoảng trống còn lại */
    width: 100%;
    border: none !important;      /* Bỏ viền trắng */
    outline: none !important;     /* Bỏ viền xanh khi click */
    background: transparent !important; /* Nền trong suốt */
    color: #ffffff !important;    /* CHỮ MÀU TRẮNG */
    font-size: 16px;
    font-weight: 500;
    padding: 14px;
    margin: 0;
    letter-spacing: 1px;
}

/* Màu chữ gợi ý (Placeholder) */
.phone-input-group input::placeholder {
    color: #64748b;
    opacity: 1;
}

/* --- FIX LỖI AUTOFILL (Khi trình duyệt tự điền màu trắng) --- */
/* Đoạn này ép trình duyệt phải dùng màu nền tối kể cả khi Autofill */
.phone-input-group input:-webkit-autofill,
.phone-input-group input:-webkit-autofill:hover, 
.phone-input-group input:-webkit-autofill:focus, 
.phone-input-group input:-webkit-autofill:active{
    -webkit-box-shadow: 0 0 0 30px #0f172a inset !important; /* Ép nền tối */
    -webkit-text-fill-color: white !important; /* Ép chữ trắng */
    transition: background-color 5000s ease-in-out 0s;
}

/* 4. Text hướng dẫn */
.modal-desc {
    text-align: center;
    font-size: 14px;
    color: #cbd5e1;
    line-height: 1.6;
    margin-bottom: 10px;
}

/* --- CSS CHO BẢNG HỒ SƠ CHI TIẾT (FULL 10 CỘT) --- */

/* 1. Khung cuộn ngang (cho màn hình nhỏ) */
.table-card {
    overflow-x: auto; /* Cho phép cuộn ngang */
    padding: 0;       /* Bỏ padding để thanh cuộn sát lề */
}

#userTable {
    width: 100%;
    min-width: 1200px; /* Đảm bảo bảng luôn rộng ít nhất 1200px để không bị co chữ */
    border-collapse: collapse;
    font-size: 14px;
}

#userTable th, #userTable td {
    padding: 12px 10px;
    text-align: center; /* Căn giữa mặc định */
    border-bottom: 1px solid var(--border);
    white-space: nowrap; /* Giữ text trên 1 dòng */
}

/* Căn trái cho các cột thông tin dài cho dễ đọc */
#userTable td:nth-child(2), /* Tên hiển thị */
#userTable td:nth-child(4), /* Username */
#userTable td:nth-child(5) { /* Email */
    text-align: left;
}

/* 2. Badge: Vai trò (Admin/User) */
.role-badge {
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 11px;
    font-weight: bold;
    text-transform: uppercase;
}
.role-admin { background: rgba(168, 85, 247, 0.2); color: #a855f7; border: 1px solid #a855f7; }
.role-user { background: rgba(148, 163, 184, 0.2); color: #cbd5e1; border: 1px solid #64748b; }

/* 3. Badge: Trạng thái (Online/Offline) */
.status-dot {
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    margin-right: 6px;
}
.st-active { background: #4ade80; box-shadow: 0 0 6px #4ade80; }
.st-inactive { background: #ef4444; }

/* 4. Cột Mật khẩu (Hiệu ứng bấm vào) */
.pass-wrapper {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    color: #94a3b8;
    cursor: pointer;
    background: rgba(255, 255, 255, 0.05);
    padding: 4px 8px;
    border-radius: 4px;
    transition: 0.2s;
}
.pass-wrapper:hover { background: rgba(255, 255, 255, 0.1); color: #fff; }

/* 5. Nút Xóa */
.btn-delete {
    background: rgba(239, 68, 68, 0.1);
    color: #ef4444;
    border: 1px solid #ef4444;
    padding: 6px 10px;
    border-radius: 4px;
    cursor: pointer;
    transition: 0.2s;
}
.btn-delete:hover { background: #ef4444; color: white; }



/* Khung chứa các thông báo */
#toast-box {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 9999; /* Luôn nổi lên trên cùng */
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* Bản thân cái thông báo */
.toast {
    min-width: 250px;
    background: #1e293b; /* Màu nền tối */
    color: #fff;
    padding: 16px 20px;
    border-radius: 8px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 14px;
    border-left: 5px solid transparent;
    animation: slideIn 0.3s ease-out, fadeOut 0.5s ease-in 2.5s forwards;
}

/* Loại thành công (Xanh lá) */
.toast.success {
    border-color: #4ade80;
}
.toast.success i {
    color: #4ade80;
    font-size: 18px;
}

/* Loại lỗi (Đỏ) */
.toast.error {
    border-color: #ef4444;
}
.toast.error i {
    color: #ef4444;
    font-size: 18px;
}

/* Hiệu ứng trượt vào */
@keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

/* Hiệu ứng mờ dần */
@keyframes fadeOut {
    to { opacity: 0; visibility: hidden; }
}